# RAG-Agent-Websearch é†«ç™‚è³‡è¨ŠæŸ¥è©¢ç³»çµ±

ä¸€å€‹çµåˆ Retrieval-Augmented Generation (RAG) èˆ‡ ReAct Agent æ¶æ§‹çš„æ™ºèƒ½é†«ç™‚è³‡è¨ŠæŸ¥è©¢ç³»çµ±ã€‚ç³»çµ±æ•´åˆæœ¬åœ°é†«å¸«è³‡æ–™åº«èˆ‡ç¶²è·¯æœå°‹åŠŸèƒ½ï¼Œèƒ½æ ¹æ“šç”¨æˆ¶å•é¡Œè‡ªå‹•é¸æ“‡æœ€åˆé©çš„æŸ¥è©¢æ–¹å¼ï¼Œæä¾›å°ˆæ¥­çš„é†«ç™‚è³‡è¨Šå›è¦†ã€‚

## ğŸš€ ç³»çµ±æ¼”ç¤º

### æŸ¥è©¢æœ¬åœ°é†«å¸«è³‡æ–™
![é†«å¸«è³‡æ–™æŸ¥è©¢](images/screenshot1.png)
*ç³»çµ±æˆåŠŸæŸ¥è©¢é«˜é›„é†«å­¸å¤§å­¸é†«å¸«çš„ä½ç½®è³‡è¨Š*

### æ™ºèƒ½æ¨ç†èˆ‡å¤šå·¥å…·å”ä½œ
![ReAct Agent æ¨ç†éç¨‹](images/screenshot5.png)
*å±•ç¤º ReAct Agent çš„æ¨ç†éç¨‹ï¼ŒåŒ…å«å¤šæ­¥é©Ÿæ€è€ƒèˆ‡è¡Œå‹•*

### é†«ç™‚ç—‡ç‹€æŸ¥è©¢
![ç—‡ç‹€æŸ¥è©¢](images/screenshot3.png)
*ç³»çµ±æä¾›æµæ„Ÿç›¸é—œç—‡ç‹€çš„è©³ç´°é†«ç™‚è³‡è¨Š*

### ç¶²é ä»‹é¢
![Web ä»‹é¢](images/screenshot4.png)
*ç›´è§€çš„ç¶²é ä»‹é¢ï¼Œæ”¯æ´å³æ™‚é†«ç™‚è³‡è¨ŠæŸ¥è©¢*

## âœ¨ å°ˆæ¡ˆç‰¹è‰²

- **ğŸ¤– ReAct Agent æ¶æ§‹**ï¼šçµåˆæ¨ç†èˆ‡è¡Œå‹•ï¼Œæ™ºèƒ½é¸æ“‡æŸ¥è©¢è·¯å¾‘
- **ğŸ” æ··åˆå¼æª¢ç´¢**ï¼šæ•´åˆæœ¬åœ°çŸ¥è­˜åº«èˆ‡å³æ™‚ç¶²è·¯æœå°‹
- **ğŸ¥ é†«ç™‚å°ˆæ¥­**ï¼šå°ˆæ³¨æ–¼é†«å¸«è³‡æ–™å’Œé†«ç™‚è³‡è¨ŠæŸ¥è©¢
- **ğŸ“Š è©³ç´°æ—¥èªŒ**ï¼šå®Œæ•´è¨˜éŒ„æ¯æ¬¡æŸ¥è©¢çš„æ¨ç†éç¨‹
- **ğŸ¯ é«˜å¯æ“´å±•**ï¼šæ¨¡çµ„åŒ–è¨­è¨ˆï¼Œæ˜“æ–¼æ“´å……æ–°åŠŸèƒ½

## ğŸ—ï¸ ç³»çµ±æ¶æ§‹

### ReAct Agent å·¥ä½œæµç¨‹

```
ç”¨æˆ¶å•é¡Œ â†’ ReAct Agent æ¨ç† â†’ å·¥å…·é¸æ“‡ â†’ è³‡æ–™æª¢ç´¢ â†’ çµæœæ•´åˆ â†’ å°ˆæ¥­å›è¦†
```

1. **æ€è€ƒéšæ®µ (Thought)**ï¼šåˆ†æå•é¡Œé¡å‹å’ŒæŸ¥è©¢éœ€æ±‚
2. **è¡Œå‹•éšæ®µ (Action)**ï¼šé¸æ“‡åˆé©çš„å·¥å…·åŸ·è¡ŒæŸ¥è©¢
3. **è§€å¯Ÿéšæ®µ (Observation)**ï¼šè™•ç†æŸ¥è©¢çµæœ
4. **æ•´åˆéšæ®µ**ï¼šçµåˆå¤šå€‹è³‡æ–™æºç”Ÿæˆæœ€çµ‚å›è¦†

### æ ¸å¿ƒå·¥å…·

- **é†«å¸«è³‡æ–™åº«æŸ¥è©¢å·¥å…·**
  - åŸºæ–¼ Chroma å‘é‡è³‡æ–™åº«
  - ä½¿ç”¨ HuggingFace BGE-M3 åµŒå…¥æ¨¡å‹
  - æ”¯æ´é†«å¸«å§“åã€å°ˆé•·ã€å­¸æ­·ã€ç¶“æ­·æŸ¥è©¢

- **ç¶²è·¯æœå°‹å·¥å…·**
  - æ•´åˆ Google Serper API
  - ç²å–æœ€æ–°é†«ç™‚è³‡è¨Šå’Œç ”ç©¶
  - æ™ºèƒ½ç¯©é¸å’Œæ‘˜è¦æœå°‹çµæœ

## ğŸ› ï¸ æŠ€è¡“æ£§

| é¡åˆ¥ | æŠ€è¡“ | ç”¨é€” |
|------|------|------|
| **å¾Œç«¯æ¡†æ¶** | FastAPI | RESTful API æœå‹™ |
| **AI æ¡†æ¶** | LangChain | Agent å’Œå·¥å…·éˆç®¡ç† |
| **å¤§èªè¨€æ¨¡å‹** | OpenAI GPT-4o | æ¨ç†å’Œå›è¦†ç”Ÿæˆ |
| **å‘é‡è³‡æ–™åº«** | Chroma | æœ¬åœ°çŸ¥è­˜åº«å­˜å„² |
| **åµŒå…¥æ¨¡å‹** | HuggingFace BGE-M3 | æ–‡æœ¬å‘é‡åŒ– |
| **ç¶²è·¯æœå°‹** | Google Serper API | å³æ™‚è³‡è¨Šæª¢ç´¢ |
| **ä¼ºæœå™¨** | Uvicorn | ASGI æ‡‰ç”¨ä¼ºæœå™¨ |

## ğŸ“ å°ˆæ¡ˆçµæ§‹

```
RAG-Agent-Websearch/
â”œâ”€â”€ react_agent_api.py      # FastAPI ä¸»å¾Œç«¯
â”œâ”€â”€ build_doctor_db.py      # å‘é‡è³‡æ–™åº«å»ºæ§‹
â”œâ”€â”€ doctors.json            # é†«å¸«åŸå§‹è³‡æ–™
â”œâ”€â”€ chroma_db/             # Chroma å‘é‡è³‡æ–™åº«
â”œâ”€â”€ client/                # å‰ç«¯å°ˆæ¡ˆ (React/Vite)
â”œâ”€â”€ test_*.py              # æ¸¬è©¦æª”æ¡ˆ
â”œâ”€â”€ requirements.txt       # Python ä¾è³´
â”œâ”€â”€ .env                   # ç’°å¢ƒè®Šæ•¸
â””â”€â”€ README.md             # å°ˆæ¡ˆèªªæ˜
```

## ğŸš€ å¿«é€Ÿé–‹å§‹

### 1. ç’°å¢ƒæº–å‚™

```bash
# å»ºç«‹è™›æ“¬ç’°å¢ƒ
conda create -n rag-agent python=3.10
conda activate rag-agent

# æˆ–ä½¿ç”¨ venv
python -m venv rag-agent
source rag-agent/bin/activate  # Linux/Mac
rag-agent\Scripts\activate     # Windows
```

### 2. å®‰è£ä¾è³´

```bash
git clone https://github.com/yourusername/RAG-Agent-Websearch.git
cd RAG-Agent-Websearch
pip install -r requirements.txt
```

### 3. è¨­å®š API é‡‘é‘°

å‰µå»º `.env` æª”æ¡ˆï¼š

```env
OPENAI_API_KEY=your_openai_api_key_here
SERPER_API_KEY=your_serper_api_key_here
```

**å–å¾— API é‡‘é‘°ï¼š**
- OpenAI API: https://platform.openai.com/account/api-keys
- Serper API: https://serper.dev/

### 4. å»ºç«‹å‘é‡è³‡æ–™åº«

```bash
python build_doctor_db.py
```

### 5. å•Ÿå‹•æœå‹™

```bash
# å•Ÿå‹•å¾Œç«¯ API
python react_agent_api.py

# å•Ÿå‹•å‰ç«¯ (å¯é¸)
cd client
npm install
npm run dev
```

### 6. æ¸¬è©¦ç³»çµ±

```bash
# åŸ·è¡Œæ¸¬è©¦
python test_agent_tool.py

# æˆ–ä½¿ç”¨ curl æ¸¬è©¦ API
curl -X POST "http://localhost:8000/api/ask" \
  -H "Content-Type: application/json" \
  -d '{"question": "æ—å®—ç¿°é†«å¸«çš„å°ˆé•·æ˜¯ä»€éº¼ï¼Ÿ"}'
```

## ğŸ“ API æ–‡æª”

### å•ç­”ç«¯é»

**POST** `/api/ask`

**è«‹æ±‚æ ¼å¼ï¼š**
```json
{
  "question": "æ‚¨çš„å•é¡Œ"
}
```

**å›æ‡‰æ ¼å¼ï¼š**
```json
{
  "result": "AI ç”Ÿæˆçš„å›è¦†",
  "execution_time": "æŸ¥è©¢åŸ·è¡Œæ™‚é–“"
}
```

**ç¯„ä¾‹ï¼š**
```bash
curl -X POST "http://localhost:8000/api/ask" \
  -H "Content-Type: application/json" \
  -d '{"question": "ä»€éº¼æ˜¯æµæ„Ÿçš„ä¸»è¦ç—‡ç‹€ï¼Ÿ"}'
```

## ğŸ¯ ä½¿ç”¨ç¯„ä¾‹

### é†«å¸«è³‡æ–™æŸ¥è©¢
```
å•é¡Œï¼šæ—å®—ç¿°é†«å¸«çš„å°ˆé•·æ˜¯ä»€éº¼ï¼Ÿ
å›è¦†ï¼šæ—å®—ç¿°é†«å¸«å°ˆç²¾æ–¼å¿ƒè‡Ÿè¡€ç®¡å…§ç§‘ï¼Œå…·æœ‰è±å¯Œçš„è‡¨åºŠç¶“é©—...
```

### é†«ç™‚è³‡è¨ŠæŸ¥è©¢
```
å•é¡Œï¼šæµæ„Ÿçš„ä¸»è¦ç—‡ç‹€æ˜¯ä»€éº¼ï¼Ÿ
å›è¦†ï¼šæµæ„Ÿçš„ä¸»è¦ç—‡ç‹€åŒ…æ‹¬çªç„¶ç™¼ç‡’ã€å’³å—½ã€å–‰åš¨ç—›ã€è‚Œè‚‰ç–¼ç—›...
```

### è¤‡åˆæŸ¥è©¢
```
å•é¡Œï¼šæˆ‘éœ€è¦å¿ƒè‡Ÿç§‘é†«å¸«ï¼ŒåŒæ™‚æƒ³äº†è§£æœ€æ–°çš„é«˜è¡€å£“æ²»ç™‚æ–¹æ³•
å›è¦†ï¼šç‚ºæ‚¨æ¨è–¦å°ˆæ¥­çš„å¿ƒè‡Ÿç§‘é†«å¸«ï¼ŒåŒæ™‚æä¾›æœ€æ–°çš„é«˜è¡€å£“æ²»ç™‚è³‡è¨Š...
```

## ğŸ”§ è‡ªè¨‚è¨­å®š

### ä¿®æ”¹åµŒå…¥æ¨¡å‹

```python
# åœ¨ react_agent_api.py ä¸­
embeddings = HuggingFaceEmbeddings(
    model_name="BAAI/bge-m3",  # å¯æ›¿æ›ç‚ºå…¶ä»–æ¨¡å‹
    model_kwargs={'device': 'cpu'},
    encode_kwargs={'normalize_embeddings': True}
)
```

### æ–°å¢é†«å¸«è³‡æ–™

```json
// åœ¨ doctors.json ä¸­æ–°å¢
{
  "name": "é†«å¸«å§“å",
  "specialty": "å°ˆç§‘é ˜åŸŸ",
  "education": "å­¸æ­·èƒŒæ™¯",
  "experience": "å·¥ä½œç¶“æ­·",
  "location": "å·¥ä½œåœ°é»"
}
```

### æ“´å……å·¥å…·åŠŸèƒ½

```python
# æ–°å¢è‡ªè¨‚å·¥å…·
@tool
def custom_medical_tool(query: str) -> str:
    """è‡ªè¨‚é†«ç™‚æŸ¥è©¢å·¥å…·"""
    # å¯¦ä½œæ‚¨çš„é‚è¼¯
    return "æŸ¥è©¢çµæœ"

# è¨»å†Šåˆ° Agent
tools = [rag_tool, web_search_tool, custom_medical_tool]
```
# é†«å¸«è³‡æ–™å‰è™•ç†ç³»çµ± (Doctor Data Preprocessing System) (build_vectorv2.py)

## ğŸ“‹ å°ˆæ¡ˆæ¦‚è¿°

æœ¬ç³»çµ±å°ˆé–€ç”¨æ–¼è™•ç†é†«å¸«è³‡æ–™ï¼Œå°‡å…¶è½‰æ›ç‚ºé©åˆå‘é‡æœå°‹çš„æ ¼å¼ï¼Œä¸¦å»ºç«‹é«˜æ•ˆçš„ ChromaDB å‘é‡è³‡æ–™åº«ã€‚ç³»çµ±æ¡ç”¨æ™ºèƒ½åˆ‡å‰²ç­–ç•¥ï¼Œé‡å°é†«å­¸å°ˆæ¥­è¡“èªé€²è¡Œå„ªåŒ–ï¼Œæä¾›é«˜ç²¾åº¦çš„é†«å¸«è³‡è¨Šæª¢ç´¢åŠŸèƒ½ã€‚

## ğŸ“ ç³»çµ±æ¶æ§‹

### æ ¸å¿ƒçµ„ä»¶

1. **DoctorDataProcessor** - é†«å¸«è³‡æ–™è™•ç†å™¨
2. **æ™ºèƒ½åˆ‡å‰²ç­–ç•¥** - è‡ªé©æ‡‰æ–‡å­—åˆ†å‰²
3. **é†«å­¸è¡“èªæ¨™æº–åŒ–** - åŒç¾©è©å­—å…¸ç®¡ç†
4. **å‘é‡è³‡æ–™åº«å»ºæ§‹** - ChromaDB æ•´åˆ
5. **è³‡æ–™é©—è­‰èˆ‡æ¸…ç†** - å“è³ªæ§åˆ¶æ©Ÿåˆ¶

## ä¸»è¦åŠŸèƒ½

### 1. è³‡æ–™æ¸…ç†èˆ‡æ¨™æº–åŒ–

#### æ–‡å­—æ¸…ç†åŠŸèƒ½
```python
def clean_text(self, text: str) -> str:
    """å¢å¼·çš„æ–‡å­—æ¸…ç†åŠŸèƒ½"""
    # ç§»é™¤å¤šé¤˜ç©ºç™½
    # ç§»é™¤ç·¨è™Ÿå‰ç¶´ (å¦‚ "1)", "2)" ç­‰)
    # ç§»é™¤ç‰¹æ®Šæ¨™è¨˜ (å¦‚ "<åŸ·ç…§>", "<å­¸æœƒ>" ç­‰)
    # æ¨™æº–åŒ–æ¨™é»ç¬¦è™Ÿ
    # æ¨™æº–åŒ–è‹±æ–‡æ•¸å­—æ ¼å¼
    # ç§»é™¤ç‰¹æ®Šå­—ç¬¦ä½†ä¿ç•™é†«å­¸ç›¸é—œç¬¦è™Ÿ
```

#### é†«å­¸è¡“èªæ¨™æº–åŒ–
- **è·ç¨±æ¨™æº–åŒ–**ï¼šä¸»æ²»é†«å¸«ã€ä½é™¢é†«å¸«ã€ä¸»ä»»ã€æ•™æˆç­‰
- **å°ˆç§‘æ¨™æº–åŒ–**ï¼šå¿ƒè‡Ÿè¡€ç®¡å…§ç§‘ã€å¿ƒè‡Ÿå…§ç§‘ã€å¿ƒè¡€ç®¡å…§ç§‘ç­‰
- **é†«é™¢åç¨±æ¨™æº–åŒ–**ï¼šé«˜é›„é†«å­¸å¤§å­¸é™„è¨­ä¸­å’Œç´€å¿µé†«é™¢ã€é«˜é†«é™„é™¢ç­‰
- **å­¸ä½æ¨™æº–åŒ–**ï¼šå­¸å£«ã€ç¢©å£«ã€åšå£«ã€é†«å­¸å£«ç­‰

### 2. æ™ºèƒ½åˆ‡å‰²ç­–ç•¥

#### åˆ‡å‰²é¡å‹
1. **åŸºæœ¬è³‡è¨Šç‰‡æ®µ** - é†«å¸«å§“åã€ç§‘åˆ¥ã€ä¸»è¦å°ˆé•·
2. **å°ˆé•·ç‰‡æ®µ** - ç•¶å°ˆé•·è¶…é8é …æ™‚è‡ªå‹•åˆ†çµ„
3. **ç¾ä»»è·ä½ç‰‡æ®µ** - è·ç¨±è³‡è¨Š
4. **ç¶“æ­·ç‰‡æ®µ** - æŒ‰æ™‚é–“è»¸åˆ†çµ„çš„å·¥ä½œç¶“æ­·
5. **å­¸æ­·ç‰‡æ®µ** - æ•™è‚²èƒŒæ™¯
6. **èªè­‰ç‰‡æ®µ** - å°ˆç§‘èªè­‰è³‡è¨Š

#### åˆ‡å‰²é‚è¼¯
```python
def chunk_doctor_data_smart(doctor: Dict[str, Any], processor: DoctorDataProcessor):
    # æ ¹æ“šè³‡æ–™å…§å®¹å’Œé•·åº¦æ¡ç”¨ä¸åŒçš„åˆ‡å‰²ç­–ç•¥
    # å°ˆé•· > 8é … â†’ åˆ†çµ„åˆ‡å‰²
    # ç¶“æ­· > 6é …ä¸”æœ‰æ™‚é–“è»¸ â†’ æŒ‰æ™‚é–“åˆ†çµ„
    # èªè­‰ > 8é … â†’ åˆ†çµ„åˆ‡å‰²
```

### 3. è³‡æ–™é©—è­‰æ©Ÿåˆ¶

#### å¿…è¦æ¬„ä½æª¢æŸ¥
- é†«å¸«å§“å (`name`)
- ç§‘åˆ¥ (`department`)
- è‡³å°‘æœ‰ä¸€å€‹å°ˆé•·æˆ–è·ç¨±

#### è³‡æ–™å®Œæ•´æ€§é©—è­‰
```python
def validate_doctor_data(self, doctor: Dict[str, Any]) -> bool:
    """é©—è­‰é†«å¸«è³‡æ–™å®Œæ•´æ€§"""
    required_fields = ['name', 'department']
    # æª¢æŸ¥å¿…è¦æ¬„ä½
    # æª¢æŸ¥å°ˆé•·æˆ–è·ç¨±è³‡è¨Š
```

### 4. é†«å­¸è³‡è¨Šæå–

#### æ­£å‰‡è¡¨é”å¼æ¨¡å¼
```python
self.medical_patterns = {
    'years': r'\b(19|20)\d{2}\b|æ°‘åœ‹\d{1,2}å¹´',
    'medical_degrees': r'(å­¸å£«|ç¢©å£«|åšå£«|Bachelor|Master|Doctor|PhD|é†«å­¸å£«)',
    'medical_specialties': r'(å…§ç§‘|å¤–ç§‘|å©¦ç”¢ç§‘|å°å…’ç§‘|ç²¾ç¥ç§‘|çš®è†šç§‘|çœ¼ç§‘|è€³é¼»å–‰ç§‘|éª¨ç§‘|æ³Œå°¿ç§‘|æ”¾å°„ç§‘|éº»é†‰ç§‘|ç—…ç†ç§‘|å¾©å¥ç§‘|å®¶é†«ç§‘|å¿ƒè‡Ÿç§‘|å¿ƒè‡Ÿè¡€ç®¡å…§ç§‘)',
    'certifications': r'(å°ˆç§‘é†«å¸«|æŒ‡å°é†«å¸«|æœƒå“¡|æœƒå£«|è­‰æ›¸|åŸ·ç…§)',
    'positions': r'(ä¸»ä»»|å‰¯ä¸»ä»»|ä¸»æ²»é†«å¸«|ä½é™¢é†«å¸«|ç¸½é†«å¸«|æ•™æˆ|å‰¯æ•™æˆ|åŠ©ç†æ•™æˆ|è¬›å¸«)'
}
```

## ğŸ“‹ åŒç¾©è©å­—å…¸

### è·ç¨±åŒç¾©è©
| æ¨™æº–è¡“èª | åŒç¾©è© |
|---------|--------|
| ä¸»æ²»é†«å¸« | ä¸»æ²»ã€attending physicianã€ä¸»æ²»é†«ç”Ÿ |
| ä½é™¢é†«å¸« | ä½é™¢ã€residentã€ä½é™¢é†«ç”Ÿ |
| ä¸»ä»» | directorã€chiefã€ç§‘ä¸»ä»»ã€éƒ¨ä¸»ä»» |
| æ•™æˆ | professorã€prof |

### å°ˆç§‘åŒç¾©è©
| æ¨™æº–è¡“èª | åŒç¾©è© |
|---------|--------|
| å¿ƒè‡Ÿè¡€ç®¡å…§ç§‘ | å¿ƒè‡Ÿå…§ç§‘ã€å¿ƒè¡€ç®¡å…§ç§‘ã€cardiologyã€å¿ƒå…§ç§‘ã€å¿ƒè‡Ÿç§‘ |
| å¿ƒè‡Ÿè¶…éŸ³æ³¢ | å¿ƒè‡Ÿè¶…éŸ³æ³¢æª¢æŸ¥ã€echocardiography |
| ä»‹å…¥æ€§æ²»ç™‚ | ä»‹å…¥æ²»ç™‚ã€interventional therapyã€å¿ƒå°ç®¡ä»‹å…¥æ²»ç™‚ |
| é‡ç—‡é†«å­¸ | é‡ç—‡ç…§è­·ã€intensive careã€åŠ è­·ç—…æˆ¿ |

### é†«é™¢åç¨±æ¨™æº–åŒ–
| æ¨™æº–åç¨± | ç°¡ç¨± |
|---------|------|
| é«˜é›„é†«å­¸å¤§å­¸é™„è¨­ä¸­å’Œç´€å¿µé†«é™¢ | é«˜é†«é™„é™¢ã€ä¸­å’Œé†«é™¢ã€ä¸­å’Œç´€å¿µé†«é™¢ |
| é«˜é›„é†«å­¸å¤§å­¸é™„è¨­é«˜é†«å²¡å±±é†«é™¢ | é«˜é†«å²¡å±±é†«é™¢ã€å²¡å±±é†«é™¢ |
| é«˜é›„å¸‚ç«‹å°æ¸¯é†«é™¢ | å°æ¸¯é†«é™¢ |
| é«˜é›„å¸‚ç«‹å¤§åŒé†«é™¢ | å¤§åŒé†«é™¢ |

## ğŸš€ ä½¿ç”¨æ–¹å¼

### 1. åŸºæœ¬ä½¿ç”¨

```python
# å»ºç«‹è™•ç†å™¨
processor = DoctorDataProcessor("doctorsv3.json")

# å»ºç«‹å‘é‡è³‡æ–™åº«
build_doctor_vector_db(
    data_source="doctorsv3.json",
    custom_source_name="é«˜é†«å¿ƒè‡Ÿç§‘é†«å¸«åå–®v3",
    use_smart_chunking=True
)
```

### 2. æ¸¬è©¦æ¨¡å¼

```bash
# åŸ·è¡Œæ¸¬è©¦æ¨¡å¼
python build_vector2.py test
```

### 3. æŸ¥è©¢é›†åˆ

```python
# ä½¿ç”¨ list_collections.py æŸ¥è©¢ç¾æœ‰é›†åˆ
python list_collections.py
```

## ğŸ“‹ è™•ç†çµ±è¨ˆ

### è³‡æ–™è™•ç†çµæœ
- **ç¸½é†«å¸«æ•¸**: 174 ä½
- **å‘é‡ç‰‡æ®µæ•¸**: 895 å€‹
- **å¹³å‡å°ˆé•·æ•¸**: 4.85 é …
- **ç§‘åˆ¥åˆ†å¸ƒ**: 14 å€‹ä¸åŒç§‘åˆ¥
- **é†«é™¢åˆ†å¸ƒ**: 4 å€‹ä¸»è¦é†«é™¢

### ç§‘åˆ¥åˆ†å¸ƒ
1. èƒ¸è…”å…§ç§‘: 28 ä½ (16.1%)
2. å¿ƒè‡Ÿè¡€ç®¡å…§ç§‘: 25 ä½ (14.4%)
3. å…§åˆ†æ³Œæ–°é™³ä»£è¬å…§ç§‘: 19 ä½ (10.9%)
4. èƒƒè…¸å…§ç§‘: 18 ä½ (10.3%)
5. è‚è†½èƒ°å…§ç§‘: 18 ä½ (10.3%)

### é†«é™¢åˆ†å¸ƒ
1. é«˜é›„é†«å­¸å¤§å­¸é™„è¨­ä¸­å’Œç´€å¿µé†«é™¢: 45 ä½ (25.9%)
2. é«˜é›„å¸‚ç«‹å°æ¸¯é†«é™¢: 10 ä½ (5.7%)
3. é«˜é›„å¸‚ç«‹å¤§åŒé†«é™¢: 10 ä½ (5.7%)
4. é«˜é›„é†«å­¸å¤§å­¸é™„è¨­é«˜é†«å²¡å±±é†«é™¢: 4 ä½ (2.3%)

## ğŸ” æœå°‹æ¸¬è©¦

### æ¸¬è©¦æŸ¥è©¢ç¯„ä¾‹
```python
test_queries = [
    "å¿ƒè‡Ÿå…§ç§‘é«˜è¡€å£“å°ˆå®¶",
    "æ—å®—æ†²é†«å¸«",
    "é«˜é†«é™„é™¢å¿ƒè‡Ÿç§‘ä¸»ä»»",
    "å¿ƒå°ç®¡ä»‹å…¥æ²»ç™‚",
    "å¿ƒè‡Ÿè¶…éŸ³æ³¢æª¢æŸ¥",
    "è‚ºå‹•è„ˆé«˜å£“æ²»ç™‚",
    "å¿ƒè‚Œç—…è®Šå°ˆå®¶",
    "ç“£è†œæ€§å¿ƒè‡Ÿç—…",
    "é‡ç—‡é†«å­¸å°ˆç§‘é†«å¸«",
    "ä»‹å…¥æ€§å¿ƒè‡Ÿè¡€ç®¡æ²»ç™‚"
]
```

### æœå°‹çµæœæ ¼å¼

æ¸¬è©¦æŸ¥è©¢: å¿ƒè‡Ÿå…§ç§‘é«˜è¡€å£“å°ˆå®¶
çµæœ 1 (ç›¸ä¼¼åº¦: 0.892): æ—å®—æ†² - å¿ƒè‡Ÿè¡€ç®¡å…§ç§‘ä¸»æ²»é†«å¸«ï¼Œå°ˆé•·ï¼šé«˜è¡€å£“...
çµæœ 2 (ç›¸ä¼¼åº¦: 0.845): ç‹å¤§æ˜ - å¿ƒè‡Ÿå…§ç§‘ä¸»ä»»ï¼Œå°ˆé•·ï¼šå¿ƒè¡€ç®¡ç–¾ç—…...


## ğŸ“ è¼¸å‡ºæª”æ¡ˆ

### è™•ç†å¾Œè³‡æ–™
- `processed_doctors_smart_YYYYMMDD_HHMMSS.json` - è™•ç†å¾Œçš„é†«å¸«è³‡æ–™
- `stats_YYYYMMDD_HHMMSS.json` - çµ±è¨ˆå ±å‘Š

### å‘é‡è³‡æ–™åº«
- `chroma_db/` - ChromaDB è³‡æ–™åº«ç›®éŒ„
- é›†åˆåç¨±: `doctors_smart_YYYYMMDD_HHMM`

## ğŸ› ï¸ æŠ€è¡“è¦æ ¼

### ä¾è³´å¥—ä»¶
```python
import json
import re
import chromadb
from sentence_transformers import SentenceTransformer
from typing import List, Dict, Any, Optional
import logging
from datetime import datetime
from collections import Counter
```

### å‘é‡æ¨¡å‹
- **æ¨¡å‹**: BAAI/bge-m3
- **èªè¨€**: å¤šèªè¨€æ”¯æ´ï¼ˆä¸­è‹±æ–‡ï¼‰
- **ç¶­åº¦**: 1024
- **æ­£è¦åŒ–**: å•Ÿç”¨

### è³‡æ–™åº«
- **é¡å‹**: ChromaDB
- **æŒä¹…åŒ–**: å•Ÿç”¨
- **ç´¢å¼•**: å‘é‡ç›¸ä¼¼åº¦æœå°‹
- **å…ƒæ•¸æ“š**: è±å¯Œçš„é†«å¸«è³‡è¨Šæ¨™ç±¤

## â­ç‰¹è‰²åŠŸèƒ½

### 1. æ™ºèƒ½åˆ‡å‰²
- æ ¹æ“šè³‡æ–™å…§å®¹è‡ªå‹•é¸æ“‡åˆ‡å‰²ç­–ç•¥
- ä¿æŒèªç¾©å®Œæ•´æ€§çš„åŒæ™‚å„ªåŒ–æœå°‹æ•ˆæœ
- æ”¯æ´é•·å°ˆé•·åˆ—è¡¨çš„æ™ºèƒ½åˆ†çµ„

### 2. é†«å­¸è¡“èªå„ªåŒ–
- å°ˆæ¥­çš„é†«å­¸åŒç¾©è©å­—å…¸
- æ”¯æ´ä¸­è‹±æ–‡æ··åˆæœå°‹
- æ¨™æº–åŒ–é†«å­¸è¡“èªè¡¨é”

### 3. è³‡æ–™å“è³ªæ§åˆ¶
- å®Œæ•´çš„è³‡æ–™é©—è­‰æ©Ÿåˆ¶
- è‡ªå‹•æ¸…ç†å’Œæ¨™æº–åŒ–
- è©³ç´°çš„è™•ç†æ—¥èªŒ

### 4. é«˜æ•ˆèƒ½è™•ç†
- æ‰¹æ¬¡è™•ç†å¤§é‡é†«å¸«è³‡æ–™
- ä¸¦è¡Œå‘é‡åŒ–è™•ç†
- è¨˜æ†¶é«”å„ªåŒ–çš„åˆ‡å‰²ç­–ç•¥

## â­è‡ªè¨‚è¨­å®š

### ä¿®æ”¹åŒç¾©è©å­—å…¸
```python
# åœ¨ DoctorDataProcessor.__init__() ä¸­ä¿®æ”¹
self.synonym_dict = {
    "æ–°è¡“èª": ["åŒç¾©è©1", "åŒç¾©è©2", "è‹±æ–‡è¡“èª"],
    # ... æ›´å¤šè¡“èª
}
```

### èª¿æ•´åˆ‡å‰²åƒæ•¸
```python
# åœ¨ chunk_doctor_data_smart() ä¸­ä¿®æ”¹
if len(doctor['specialty']) > 8:  # èª¿æ•´é–¾å€¼
    specialty_groups = [doctor['specialty'][i:i+8] for i in range(0, len(doctor['specialty']), 8)]
```

### æ–°å¢æ­£å‰‡è¡¨é”å¼æ¨¡å¼
```python
# åœ¨ medical_patterns ä¸­æ–°å¢
'new_pattern': r'(æ–°çš„æ­£å‰‡è¡¨é”å¼æ¨¡å¼)',
```
---

## ğŸ› å¸¸è¦‹å•é¡Œ

### Q: æ¨¡å‹ä¸‹è¼‰å¾ˆæ…¢æ€éº¼è¾¦ï¼Ÿ
**A:** å¯ä»¥æ‰‹å‹•ä¸‹è¼‰æ¨¡å‹åˆ°æœ¬åœ°ä¸¦æŒ‡å®šè·¯å¾‘ï¼Œæˆ–ä½¿ç”¨é¡åƒç«™é»ã€‚

### Q: API é‡‘é‘°ç„¡æ•ˆ
**A:** è«‹ç¢ºèª `.env` æª”æ¡ˆæ ¼å¼æ­£ç¢ºï¼Œä¸”é‡‘é‘°æœªéæœŸã€‚

### Q: Chroma è³‡æ–™åº«éŒ¯èª¤
**A:** åˆªé™¤ `chroma_db/` ç›®éŒ„å¾Œé‡æ–°åŸ·è¡Œ `build_doctor_db.py`ã€‚

### Q: å‰ç«¯ CORS å•é¡Œ
**A:** å·²åœ¨ FastAPI ä¸­è¨­å®š CORSï¼Œå¦‚æœ‰å•é¡Œè«‹æª¢æŸ¥ `CORSMiddleware` è¨­å®šã€‚

## ğŸ“Š æ•ˆèƒ½æŒ‡æ¨™

- **æŸ¥è©¢å›æ‡‰æ™‚é–“**ï¼šå¹³å‡ 2-5 ç§’
- **æœ¬åœ°æª¢ç´¢ç²¾ç¢ºåº¦**ï¼š> 95%
- **ç¶²è·¯æœå°‹æ•´åˆ**ï¼šè‡ªå‹•åˆ¤æ–·è§¸ç™¼
- **åŒæ™‚ä½µç™¼è™•ç†**ï¼šæ”¯æ´å¤šç”¨æˆ¶æŸ¥è©¢

## ğŸ¤ è²¢ç»æŒ‡å—

1. Fork æœ¬å°ˆæ¡ˆ
2. å»ºç«‹åŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. å»ºç«‹ Pull Request

## ğŸ“„ æˆæ¬Š

æœ¬å°ˆæ¡ˆæ¡ç”¨ MIT æˆæ¬Šæ¢æ¬¾ - è©³è¦‹ [LICENSE](LICENSE) æª”æ¡ˆã€‚

## ğŸ™ è‡´è¬

- OpenAI æä¾›å¼·å¤§çš„ GPT-4o æ¨¡å‹
- HuggingFace æä¾›å„ªç§€çš„åµŒå…¥æ¨¡å‹
- LangChain æä¾›å®Œæ•´çš„ Agent æ¡†æ¶
- Chroma æä¾›é«˜æ•ˆçš„å‘é‡è³‡æ–™åº«

## ğŸ“ è¯çµ¡æˆ‘å€‘

- å°ˆæ¡ˆé€£çµ: (https://github.com/Tsai1030/Langchain-ReAct-Agent/tree/main)
- å•é¡Œå›å ±: (https://github.com/Tsai1030/Langchain-ReAct-Agent/tree/main)
- é›»å­éƒµä»¶: pijh102511@gmail.com
- **ç‰ˆæœ¬**: v3.0
- **æ›´æ–°æ—¥æœŸ**: 2025-07-04

---

â­ å¦‚æœé€™å€‹å°ˆæ¡ˆå°æ‚¨æœ‰å¹«åŠ©ï¼Œè«‹çµ¦æˆ‘å€‘ä¸€å€‹ Starï¼
