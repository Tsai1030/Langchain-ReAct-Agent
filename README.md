# RAG-Agent-Websearch é†«ç™‚è³‡è¨ŠæŸ¥è©¢ç³»çµ±

ä¸€å€‹çµåˆ Retrieval-Augmented Generation (RAG) èˆ‡ ReAct Agent æ¶æ§‹çš„æ™ºèƒ½é†«ç™‚è³‡è¨ŠæŸ¥è©¢ç³»çµ±ã€‚ç³»çµ±æ•´åˆæœ¬åœ°é†«å¸«è³‡æ–™åº«èˆ‡ç¶²è·¯æœå°‹åŠŸèƒ½ï¼Œèƒ½æ ¹æ“šç”¨æˆ¶å•é¡Œè‡ªå‹•é¸æ“‡æœ€åˆé©çš„æŸ¥è©¢æ–¹å¼ï¼Œæä¾›å°ˆæ¥­çš„é†«ç™‚è³‡è¨Šå›è¦†ã€‚

## ğŸš€ ç³»çµ±æ¼”ç¤º

### æŸ¥è©¢æœ¬åœ°é†«å¸«è³‡æ–™
![é†«å¸«è³‡æ–™æŸ¥è©¢](images/screenshot1.png)
*ç³»çµ±æˆåŠŸæŸ¥è©¢é«˜é›„é†«å­¸å¤§å­¸é†«å¸«çš„ä½ç½®è³‡è¨Š*

### æ™ºèƒ½æ¨ç†èˆ‡å¤šå·¥å…·å”ä½œ
![ReAct Agent æ¨ç†éç¨‹](images/screenshot2.png)
*å±•ç¤º ReAct Agent çš„æ¨ç†éç¨‹ï¼ŒåŒ…å«å¤šæ­¥é©Ÿæ€è€ƒèˆ‡è¡Œå‹•*

### é†«ç™‚ç—‡ç‹€æŸ¥è©¢
![ç—‡ç‹€æŸ¥è©¢](images/screenshot3.png)
*ç³»çµ±æä¾›æµæ„Ÿç›¸é—œç—‡ç‹€çš„è©³ç´°é†«ç™‚è³‡è¨Š*

### ç¶²é ä»‹é¢
![Web ä»‹é¢](images/screenshot4.png)
*ç›´è§€çš„ç¶²é ä»‹é¢ï¼Œæ”¯æ´å³æ™‚é†«ç™‚è³‡è¨ŠæŸ¥è©¢*

## âœ¨ å°ˆæ¡ˆç‰¹è‰²

- **ğŸ¤– ReAct Agent æ¶æ§‹**ï¼šçµåˆæ¨ç†èˆ‡è¡Œå‹•ï¼Œæ™ºèƒ½é¸æ“‡æŸ¥è©¢è·¯å¾‘
- **ğŸ” æ··åˆå¼æª¢ç´¢**ï¼šæ•´åˆæœ¬åœ°çŸ¥è­˜åº«èˆ‡å³æ™‚ç¶²è·¯æœå°‹
- **ğŸ¥ é†«ç™‚å°ˆæ¥­**ï¼šå°ˆæ³¨æ–¼é†«å¸«è³‡æ–™å’Œé†«ç™‚è³‡è¨ŠæŸ¥è©¢
- **ğŸ“Š è©³ç´°æ—¥èªŒ**ï¼šå®Œæ•´è¨˜éŒ„æ¯æ¬¡æŸ¥è©¢çš„æ¨ç†éç¨‹
- **ğŸ¯ é«˜å¯æ“´å±•**ï¼šæ¨¡çµ„åŒ–è¨­è¨ˆï¼Œæ˜“æ–¼æ“´å……æ–°åŠŸèƒ½

## ğŸ—ï¸ ç³»çµ±æ¶æ§‹

### ReAct Agent å·¥ä½œæµç¨‹

```
ç”¨æˆ¶å•é¡Œ â†’ ReAct Agent æ¨ç† â†’ å·¥å…·é¸æ“‡ â†’ è³‡æ–™æª¢ç´¢ â†’ çµæœæ•´åˆ â†’ å°ˆæ¥­å›è¦†
```

1. **æ€è€ƒéšæ®µ (Thought)**ï¼šåˆ†æå•é¡Œé¡å‹å’ŒæŸ¥è©¢éœ€æ±‚
2. **è¡Œå‹•éšæ®µ (Action)**ï¼šé¸æ“‡åˆé©çš„å·¥å…·åŸ·è¡ŒæŸ¥è©¢
3. **è§€å¯Ÿéšæ®µ (Observation)**ï¼šè™•ç†æŸ¥è©¢çµæœ
4. **æ•´åˆéšæ®µ**ï¼šçµåˆå¤šå€‹è³‡æ–™æºç”Ÿæˆæœ€çµ‚å›è¦†

### æ ¸å¿ƒå·¥å…·

- **é†«å¸«è³‡æ–™åº«æŸ¥è©¢å·¥å…·**
  - åŸºæ–¼ Chroma å‘é‡è³‡æ–™åº«
  - ä½¿ç”¨ HuggingFace BGE-M3 åµŒå…¥æ¨¡å‹
  - æ”¯æ´é†«å¸«å§“åã€å°ˆé•·ã€å­¸æ­·ã€ç¶“æ­·æŸ¥è©¢

- **ç¶²è·¯æœå°‹å·¥å…·**
  - æ•´åˆ Google Serper API
  - ç²å–æœ€æ–°é†«ç™‚è³‡è¨Šå’Œç ”ç©¶
  - æ™ºèƒ½ç¯©é¸å’Œæ‘˜è¦æœå°‹çµæœ

## ğŸ› ï¸ æŠ€è¡“æ£§

| é¡åˆ¥ | æŠ€è¡“ | ç”¨é€” |
|------|------|------|
| **å¾Œç«¯æ¡†æ¶** | FastAPI | RESTful API æœå‹™ |
| **AI æ¡†æ¶** | LangChain | Agent å’Œå·¥å…·éˆç®¡ç† |
| **å¤§èªè¨€æ¨¡å‹** | OpenAI GPT-4o | æ¨ç†å’Œå›è¦†ç”Ÿæˆ |
| **å‘é‡è³‡æ–™åº«** | Chroma | æœ¬åœ°çŸ¥è­˜åº«å­˜å„² |
| **åµŒå…¥æ¨¡å‹** | HuggingFace BGE-M3 | æ–‡æœ¬å‘é‡åŒ– |
| **ç¶²è·¯æœå°‹** | Google Serper API | å³æ™‚è³‡è¨Šæª¢ç´¢ |
| **ä¼ºæœå™¨** | Uvicorn | ASGI æ‡‰ç”¨ä¼ºæœå™¨ |

## ğŸ“ å°ˆæ¡ˆçµæ§‹

```
RAG-Agent-Websearch/
â”œâ”€â”€ react_agent_api.py      # FastAPI ä¸»å¾Œç«¯
â”œâ”€â”€ build_doctor_db.py      # å‘é‡è³‡æ–™åº«å»ºæ§‹
â”œâ”€â”€ doctors.json            # é†«å¸«åŸå§‹è³‡æ–™
â”œâ”€â”€ chroma_db/             # Chroma å‘é‡è³‡æ–™åº«
â”œâ”€â”€ client/                # å‰ç«¯å°ˆæ¡ˆ (React/Vite)
â”œâ”€â”€ test_*.py              # æ¸¬è©¦æª”æ¡ˆ
â”œâ”€â”€ requirements.txt       # Python ä¾è³´
â”œâ”€â”€ .env                   # ç’°å¢ƒè®Šæ•¸
â””â”€â”€ README.md             # å°ˆæ¡ˆèªªæ˜
```

## ğŸš€ å¿«é€Ÿé–‹å§‹

### 1. ç’°å¢ƒæº–å‚™

```bash
# å»ºç«‹è™›æ“¬ç’°å¢ƒ
conda create -n rag-agent python=3.10
conda activate rag-agent

# æˆ–ä½¿ç”¨ venv
python -m venv rag-agent
source rag-agent/bin/activate  # Linux/Mac
rag-agent\Scripts\activate     # Windows
```

### 2. å®‰è£ä¾è³´

```bash
git clone https://github.com/yourusername/RAG-Agent-Websearch.git
cd RAG-Agent-Websearch
pip install -r requirements.txt
```

### 3. è¨­å®š API é‡‘é‘°

å‰µå»º `.env` æª”æ¡ˆï¼š

```env
OPENAI_API_KEY=your_openai_api_key_here
SERPER_API_KEY=your_serper_api_key_here
```

**å–å¾— API é‡‘é‘°ï¼š**
- OpenAI API: https://platform.openai.com/account/api-keys
- Serper API: https://serper.dev/

### 4. å»ºç«‹å‘é‡è³‡æ–™åº«

```bash
python build_doctor_db.py
```

### 5. å•Ÿå‹•æœå‹™

```bash
# å•Ÿå‹•å¾Œç«¯ API
python react_agent_api.py

# å•Ÿå‹•å‰ç«¯ (å¯é¸)
cd client
npm install
npm run dev
```

### 6. æ¸¬è©¦ç³»çµ±

```bash
# åŸ·è¡Œæ¸¬è©¦
python test_agent_tool.py

# æˆ–ä½¿ç”¨ curl æ¸¬è©¦ API
curl -X POST "http://localhost:8000/api/ask" \
  -H "Content-Type: application/json" \
  -d '{"question": "æ—å®—ç¿°é†«å¸«çš„å°ˆé•·æ˜¯ä»€éº¼ï¼Ÿ"}'
```

## ğŸ“ API æ–‡æª”

### å•ç­”ç«¯é»

**POST** `/api/ask`

**è«‹æ±‚æ ¼å¼ï¼š**
```json
{
  "question": "æ‚¨çš„å•é¡Œ"
}
```

**å›æ‡‰æ ¼å¼ï¼š**
```json
{
  "result": "AI ç”Ÿæˆçš„å›è¦†",
  "execution_time": "æŸ¥è©¢åŸ·è¡Œæ™‚é–“"
}
```

**ç¯„ä¾‹ï¼š**
```bash
curl -X POST "http://localhost:8000/api/ask" \
  -H "Content-Type: application/json" \
  -d '{"question": "ä»€éº¼æ˜¯æµæ„Ÿçš„ä¸»è¦ç—‡ç‹€ï¼Ÿ"}'
```

## ğŸ¯ ä½¿ç”¨ç¯„ä¾‹

### é†«å¸«è³‡æ–™æŸ¥è©¢
```
å•é¡Œï¼šæ—å®—ç¿°é†«å¸«çš„å°ˆé•·æ˜¯ä»€éº¼ï¼Ÿ
å›è¦†ï¼šæ—å®—ç¿°é†«å¸«å°ˆç²¾æ–¼å¿ƒè‡Ÿè¡€ç®¡å…§ç§‘ï¼Œå…·æœ‰è±å¯Œçš„è‡¨åºŠç¶“é©—...
```

### é†«ç™‚è³‡è¨ŠæŸ¥è©¢
```
å•é¡Œï¼šæµæ„Ÿçš„ä¸»è¦ç—‡ç‹€æ˜¯ä»€éº¼ï¼Ÿ
å›è¦†ï¼šæµæ„Ÿçš„ä¸»è¦ç—‡ç‹€åŒ…æ‹¬çªç„¶ç™¼ç‡’ã€å’³å—½ã€å–‰åš¨ç—›ã€è‚Œè‚‰ç–¼ç—›...
```

### è¤‡åˆæŸ¥è©¢
```
å•é¡Œï¼šæˆ‘éœ€è¦å¿ƒè‡Ÿç§‘é†«å¸«ï¼ŒåŒæ™‚æƒ³äº†è§£æœ€æ–°çš„é«˜è¡€å£“æ²»ç™‚æ–¹æ³•
å›è¦†ï¼šç‚ºæ‚¨æ¨è–¦å°ˆæ¥­çš„å¿ƒè‡Ÿç§‘é†«å¸«ï¼ŒåŒæ™‚æä¾›æœ€æ–°çš„é«˜è¡€å£“æ²»ç™‚è³‡è¨Š...
```

## ğŸ”§ è‡ªè¨‚è¨­å®š

### ä¿®æ”¹åµŒå…¥æ¨¡å‹

```python
# åœ¨ react_agent_api.py ä¸­
embeddings = HuggingFaceEmbeddings(
    model_name="BAAI/bge-m3",  # å¯æ›¿æ›ç‚ºå…¶ä»–æ¨¡å‹
    model_kwargs={'device': 'cpu'},
    encode_kwargs={'normalize_embeddings': True}
)
```

### æ–°å¢é†«å¸«è³‡æ–™

```json
// åœ¨ doctors.json ä¸­æ–°å¢
{
  "name": "é†«å¸«å§“å",
  "specialty": "å°ˆç§‘é ˜åŸŸ",
  "education": "å­¸æ­·èƒŒæ™¯",
  "experience": "å·¥ä½œç¶“æ­·",
  "location": "å·¥ä½œåœ°é»"
}
```

### æ“´å……å·¥å…·åŠŸèƒ½

```python
# æ–°å¢è‡ªè¨‚å·¥å…·
@tool
def custom_medical_tool(query: str) -> str:
    """è‡ªè¨‚é†«ç™‚æŸ¥è©¢å·¥å…·"""
    # å¯¦ä½œæ‚¨çš„é‚è¼¯
    return "æŸ¥è©¢çµæœ"

# è¨»å†Šåˆ° Agent
tools = [rag_tool, web_search_tool, custom_medical_tool]
```

## ğŸ› å¸¸è¦‹å•é¡Œ

### Q: æ¨¡å‹ä¸‹è¼‰å¾ˆæ…¢æ€éº¼è¾¦ï¼Ÿ
**A:** å¯ä»¥æ‰‹å‹•ä¸‹è¼‰æ¨¡å‹åˆ°æœ¬åœ°ä¸¦æŒ‡å®šè·¯å¾‘ï¼Œæˆ–ä½¿ç”¨é¡åƒç«™é»ã€‚

### Q: API é‡‘é‘°ç„¡æ•ˆ
**A:** è«‹ç¢ºèª `.env` æª”æ¡ˆæ ¼å¼æ­£ç¢ºï¼Œä¸”é‡‘é‘°æœªéæœŸã€‚

### Q: Chroma è³‡æ–™åº«éŒ¯èª¤
**A:** åˆªé™¤ `chroma_db/` ç›®éŒ„å¾Œé‡æ–°åŸ·è¡Œ `build_doctor_db.py`ã€‚

### Q: å‰ç«¯ CORS å•é¡Œ
**A:** å·²åœ¨ FastAPI ä¸­è¨­å®š CORSï¼Œå¦‚æœ‰å•é¡Œè«‹æª¢æŸ¥ `CORSMiddleware` è¨­å®šã€‚

## ğŸ“Š æ•ˆèƒ½æŒ‡æ¨™

- **æŸ¥è©¢å›æ‡‰æ™‚é–“**ï¼šå¹³å‡ 2-5 ç§’
- **æœ¬åœ°æª¢ç´¢ç²¾ç¢ºåº¦**ï¼š> 95%
- **ç¶²è·¯æœå°‹æ•´åˆ**ï¼šè‡ªå‹•åˆ¤æ–·è§¸ç™¼
- **åŒæ™‚ä½µç™¼è™•ç†**ï¼šæ”¯æ´å¤šç”¨æˆ¶æŸ¥è©¢

## ğŸ¤ è²¢ç»æŒ‡å—

1. Fork æœ¬å°ˆæ¡ˆ
2. å»ºç«‹åŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. å»ºç«‹ Pull Request

## ğŸ“„ æˆæ¬Š

æœ¬å°ˆæ¡ˆæ¡ç”¨ MIT æˆæ¬Šæ¢æ¬¾ - è©³è¦‹ [LICENSE](LICENSE) æª”æ¡ˆã€‚

## ğŸ™ è‡´è¬

- OpenAI æä¾›å¼·å¤§çš„ GPT-4o æ¨¡å‹
- HuggingFace æä¾›å„ªç§€çš„åµŒå…¥æ¨¡å‹
- LangChain æä¾›å®Œæ•´çš„ Agent æ¡†æ¶
- Chroma æä¾›é«˜æ•ˆçš„å‘é‡è³‡æ–™åº«

## ğŸ“ è¯çµ¡æˆ‘å€‘

- å°ˆæ¡ˆé€£çµ: https://github.com/yourusername/RAG-Agent-Websearch
- å•é¡Œå›å ±: https://github.com/yourusername/RAG-Agent-Websearch/issues
- é›»å­éƒµä»¶: your.email@example.com

---

â­ å¦‚æœé€™å€‹å°ˆæ¡ˆå°æ‚¨æœ‰å¹«åŠ©ï¼Œè«‹çµ¦æˆ‘å€‘ä¸€å€‹ Starï¼
